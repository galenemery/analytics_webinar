
Example
“Hello everyone and welcome to today’s webinar: ‘Get the most from Chef: Analytics, Provisioning, and more.’ My name is Galen Emery. I'm an Automation Engineer here at Chef and I’m really excited to be a part of this session today.

I have a couple of housekeeping items to cover quickly before we get started. Today’s webinar will be available on demand after the live session, accessible through the same link you’re using now.

We’d also love to hear from you during today’s presentation. I’ll be answering questions at the end of the session, so please feel free to send those along using the ‘Ask a Question’ tab on the top of your screen.

And last, we’d like to encourage you to share today’s webinar with your professional and social networks.

For those of you just joining, welcome to today’s session, ‘Get the most from Chef: Analytics, Provisioning, and More,’ I'm Galen Emery. Let’s get started..



Talk Track:

- Showing off some new features of Chef.  Analytics and Provisioning.

- Lets start with Analytics.  Analytics gives us visibility into our infrastructure that we've never had before.  I can utilize actions to see who has made what changes to the Chef Server.  (Example: modifying a role or environment)

-- Slides: Analytics: Analytics Provides Visibility in Three Ways

-- Slides: Analytics: Actions - Who did what and when?

- We see the change show up in the timeline.  We can look at the diff of the change and see who exactly made it.  What's this tag here?  This tag is created via an Analytics rule.  If we look at the rule, we can see that no person is allowed to make changes to the Chef Server directly.  That's because we push all of our code through a Chef Delivery pipeline (more on that later).  [Explain Delivery quickly here.  Mention its coming down the pipe.  If you already have a pipeline, approved cookbook maintainers, etc]

-- Slides: Analytics: Rules - Notifying on Actions
  -- Rule type (on):
      Actions
  -- Rule trigger (when): [Examples of items used for triggers]
      -- action : requestor_name
  -- Rule Action (then):
      -- notify
      -- alert
      -- set tag(#no_humans, "changes must go through the pipeline")
  -- Rule Otherwise:
      -- set tag(#robots_ftw, "Finally, robotic beings rule the world")
      

- While we can use rules to alert us upon actions on the chef server, we can also utilize rules to look at some other pieces of our infrastructure.  We can go to the alerts tab to see all of the alerts generated by Analytics.

- We see this alert "Warning: machine not monitored in production".  Lets take a look at that rule and see what's happening there.  Looking at the rule, we expect that every node is supposed to have the role[monitoring_agent] assigned to it.  Checking in the Chef Server, we see that our nodes in fact do not have that role assigned to them.  Lets fix that by adding it to our base role.

- Okay, so we have our infrastructure set up the way we want it.  But we need to add two more web servers.  This is where provisioning can come in and build servers for us.


Provisioning: Provisioning works with your Virtualization provider (VSphere, AWS, Azure, etc) to spin up your entire infrastructure and manage the state.

-- Slides: Provisioning: How does it work?



- Analytics: Run Controls

-- Slides: Analytics -- Audit Mode

-- Slides: Analytics: Rules - Audit Failure
  -- Rule type (on):
      run_control
  -- Rule trigger (when): [Examples of items used for triggers]
      -- action : requestor_name
      -- run_control_group : status
      -- run_converge : updated_resource_count
      -- run_resource : delta
  -- Rule Action (then):
      -- notify
      -- alert
      -- set tag(#no_humans, "changes must go through the pipeline")
  -- Rule Otherwise



